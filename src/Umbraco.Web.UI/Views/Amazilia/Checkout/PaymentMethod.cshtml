@inherits UmbracoViewPage<CheckoutPaymentMethodModel>
@using Amazilia.Web.Models.Checkout
@using Amazilia.Web.Controllers

@*@if (!Model.OnePageCheckoutEnabled)
    {
        @Html.Action("CheckoutProgress", "Checkout", new { step = CheckoutProgressStep.Cart })
    }*@

<div class="page checkout-page paymentmethod-page">

    @*@Html.Action("CheckoutProgress", "Checkout", new { step = CheckoutProgressStep.Address })*@

    <div class="page-title">
        @*<h1>@T("Checkout.BillingAddress")</h1>*@
    </div>
    @{using (Html.BeginUmbracoForm<CheckoutController>
                               ("PaymentMethodSubmit", new { area = "Amazilia" }))
        {
            <div class="page-body checkout-data">


                <ul>
                    @foreach (var item in Model.PaymentMethods)
                    {
                        <li><input type="radio" @(item.Selected ? "checked=checked" : "") value="@item.Id" onchange="getPaymenyInfo('@item.PaymentInfoPath')" name="PaymentMethodId" />@item.Name</li>

                    }
                </ul>



            </div>

            <div class="paymentInfo">

                @{
                    var paymentMethod = Model.PaymentMethods.FirstOrDefault(a => a.Selected);

                    if (paymentMethod != null)
                    {
                        <div>@Html.Action(paymentMethod.ActionName, paymentMethod.ControllerName, paymentMethod.RouteValues)</div>
                    }
                }

            </div>
            <div class="buttons">
                <input type="submit" name="nextstep" value="Next" class="btn btn-success" />
            </div>

        }
    }
</div>

<script>

    function getPaymenyInfo(path){
        // todo , load paymentinfo through ajax

    }

</script>
